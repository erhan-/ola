environment:
  matrix:
    - Build: mingw

install:
  - set PATH=%PATH%;C:\MinGW\bin
  #These are already installed: mingw32-base msys-coreutils msys-wget
  - C:\MinGW\bin\mingw-get.exe install mingw32-pthreads-w32

before_build:
  - set CPPFLAGS="-I/usr/local/include"
  - set LDFLAGS = "-L/usr/local/lib"
  - set PKG_CONFIG_PATH = "/usr/local/lib/pkgconfig"

build_script:
  - dir C:\MinGW\bin\autoreconf
  - C:\MinGW\bin\autoreconf -i -f
  - ./configure --enable-python-libs --disable-all-plugins --enable-artnet --enable-dummy --enable-espnet --enable-kinet --enable-opendmx --enable-osc --enable-pathport --enable-sandnet --enable-shownet
  - make

test_script:
  - make check

on_failure:
  - appveyor PushArtifact test-suite.log
  - appveyor AddTest test
